<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <title> منصة بناء </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.4.2/css/all.css">
    <link rel="stylesheet" href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/css/redio.css">
    <link rel="stylesheet" href="../assets/css/dashboard.css">
</head>


<body>

    <div class="page d-flex">
        <div class="rightMenu">
            <ul>
                <h3 class="title_rightMenu">بناء</h3>
                <a id="rightMenuToggle"> <i class="fa-solid fa-eye-slash"></i></a>
                <a href="dashboard.html">
                    <i class="fa-solid fa-sliders"></i>
                    <span>لوحة التحكم</span>
                </a>
                <hr>
                <a href="projects.html">
                    <i class="fa-light fa-business-time"></i>
                    <span>ادارة المشاريع</span>
                </a>
                <hr>
                <a href="{{route('contractor.offers.index')}}">
                    <i class="fa-regular fa-rectangle-history"></i>
                    <span>ادارة العروض</span>
                </a>
                <hr>
                <a href="/contract">
                    <i class="fa-light fa-file-contract"></i>
                    <span>ادارة العقود</span>
                </a>
                <hr>
                <a href="{{route('contractor.appointments.index')}}">
                    <i class="fa-thin fa-calendar-clock"></i>
                    <span>ادارة المواعيد</span>
                </a>
                <hr>
                <a href="/page.development">
                    <i class="fa-light fa-rectangle"></i>
                    <span>الاراضي والمخططات</span>
                </a>
                <hr>
                <a href="{{ route('contractor.construction_stages.index') }}">
                    <i class="fa-thin fa-chart-mixed-up-circle-dollar"></i>
                    <span> تقارير البناء </span>
                </a>
                <hr>
                <a href="{{ route('contractor.construction_stages.index') }}">
                    <i class="fa-light fa-bell"></i>
                    <span>الاشعارات</span>
                </a>
                <hr>
                <a href="../index.html">
                    <i class="fa-solid fa-house"></i>
                    <span> الرجوع للرئيسية </span>
                </a>
                <hr>

            </ul>
        </div>
        <div class="left-content">
            <nav class="navbar navbar-expand-lg bg-body-tertiary">
                <a class="navbar-brand" href="../index.html"><img src="../assets/img/green-logo.png" alt=""></a>
                <ul class="me-auto navbar-icon">
                    <li class="nav-item" id="notificationsButton">
                        <a class="nav-link" href="javascript:void(0)" onclick="toggleNotifications()">
                            <i class="fa-light fa-bell"></i>
                            <span>الاشعارات</span>
                            <!-- عرض عدد الإشعارات -->
                            <span class="badge">
                            </span>
                            <span class="badge bg-secondary"> 0</span>

                        </a>

                        <!-- قائمة الإشعارات المنسدلة -->
                        <div id="notificationsDropdown">
                            <div class="notification-item">
                                <p> تم تقديم عرض جديد على مشروعك رقم OFR-7786b، يرجى مراجعته. </p>
                                <p> 2025-02-27 13:21 </p>
                            </div>
                            <div class="notification-item">
                                <p>تم تقديم عرض جديد على مشروعك رقم OFR-7786b، يرجى مراجعته. </p>
                                <p> 2025-02-27 13:21 </p>
                            </div>
                            <div class="notification-item">
                                <p>تم تقديم عرض جديد على مشروعك رقم OFR-7786b، يرجى مراجعته. تم تقديم عرض جديد على
                                    مشروعك رقم OFR-7786b، يرجى مراجعته.
                                </p>
                                <p>
                                    2025-02-27 13:21
                                </p>
                            </div>

                            <div class="text-center mt-4">
                                <a class="btn_notification"
                                    href="https://binaa-ksa.com/real-estate-developer/notifications">
                                    عرض الكل
                                </a>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/page.development">
                            <i class="fa-light fa-message-lines"></i>
                            <span>الرسائل</span>
                        </a>
                    </li>

                    <li class="nav-item text-center" id="profileDropdownbtn">
                        <a onclick="toggleprofileDropdown()" class="nav-link d-flex flex-column align-items-center"
                            href="javascript:void(0)">
                            <img src="../assets/img/about-3.jpg" alt="الصورة الشخصية" class="prof_img">
                        </a>


                        <!-- قائمة الصفحة الشخصية المنسدلة -->
                        <div id="profileDropdown">
                            <img src="../assets/img/about-3.jpg" alt="الصورة الشخصية" class="prof_img">
                            <form action="" method="POST" class="formProfileDropdown">
                                <a class="profile_btn" href="profile.html"><i class="fa-solid fa-user"></i>الملف
                                    الشخصي</a>
                                <!-- <a onclick="toggleprofileDropdown()"class="nav-link d-flex flex-column align-items-center"
                                                                            href="{{route('contractor.profile.index')}}"> -->
                                <button class="logout-btn" type="submit"> <i class="fa-solid fa-right-from-bracket"></i>
                                    تسجيل الخروج </button>
                            </form>

                        </div>
                    </li>

                </ul>
            </nav>
            <div class="container dash-content">
                <div class="register">
                    <div class="row justify-content-center">
                        <div class="d-flex justify-content-between">
                            <h3 class="title">
                                تفاصيل <strong class="main-color">المشروع</strong>
                                <hr>
                            </h3>
                        </div>
                        <div class="row">
                            <div class="col-md-8">
                                <div class="card mb-0">
                                    <div>
                                        <h4 class="">Amir Woods</h4>
                                        <div class="fs-6 other-datails">
                                            <div><i class="fa-light fa-user"></i> شركة التطوير العقاري الاولي 1</div>
                                            <div><i class="fa-thin fa-calendar-clock"></i> منذ 3 أسابيع</div>
                                            <div><i class="fa-thin fa-location-dot"></i>جازان - Voluptate irure volu
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="description"
                                        style="max-width: 100% !important; width: 100% !important; white-space: normal !important; overflow-wrap: break-word !important; word-break: break-word !important; padding: 10px !important; overflow: hidden !important; text-overflow: ellipsis !important;">
                                        Minus optio tempori
                                    </div>
                                </div>
                                <br>
                                <form class="card  store pt-4" action="{{route('contractor.projects.store.offer')}} "
                                    method="POST" enctype="multipart/form-data" id="projectForm">
                                    <input type="hidden" name="project_id" value="{{$project->id}}">
                                    <div class="row">
                                        <div class="col-md-6 position-relative registerOffer">
                                            <input type="number" required name="price_per_meter"
                                                value="{{ old('price_per_meter') }}" class="input" placeholder="">
                                            <span class="highlight"></span>
                                            <span class="bar"></span>
                                            <label for="">سعر المتر</label>
                                            <div style="color: red;"> </div>
                                        </div>
                                        <div class="col-md-6 position-relative registerOffer mt-4">
                                            <input type="number" required name="land_value"
                                                value="{{ old('land_value') }}" class="input" placeholder="">
                                            <span class="highlight"></span>
                                            <span class="bar"></span>
                                            <label for="" class="text-nowrap">قيمة العرض الاجمالية</label>
                                        </div>
                                    </div>

                                    <div class="position-relative registerOffer my-4">
                                        <textarea id="autoResize" required name="description" class="input"
                                            placeholder=""></textarea>
                                        <span class="highlight"></span>
                                        <span class="bar"></span>
                                        <label for="">وصف العرض </label>
                                    </div>

                                    <div
                                        class="d-flex align-items-center justify-content-around flex-md-row flex-column">

                                        <div class="row" id="land-deed-container">
                                            <div class="col-md-12 px-0 ">
                                                <label for="file_pricing" class="custom-file-upload bg-danger text-light align-items-center ">
                                                    <i class="fa-solid fa-file-import text-light"></i>
                                                    <span id="file-label" class="text-nowrap" style="max-width: 135px;">ارفاق التسعير كـ PDF</span>
                                                    <input type="file" name="file_pricing" id="file_pricing"
                                                        class="myInput" accept=".pdf" hidden />
                                                </label>
                                            </div>
                                        </div>

                                        <button id="submit_button" type="submit"
                                            class="btn-main-color my-4 px-lg-5 px-2 " style="min-width: 185px;">
                                            ارسال العـــــرض
                                        </button>
                                    </div>

                                    <div style="color: red;"></div>


                                </form>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="d-flex justify-content-between">
                                        <b>
                                            <!-- @if($project->getFileName()) -->
                                            <a href="{{ \App\Models\Project::getFileUrl($project->getFileName(), 'uploads') }}"
                                                download
                                                style="cursor: pointer; color: darkgreen; text-decoration: none; display: flex; align-items: center;">
                                                جداول الكميات والمخططات
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                    fill="currentColor" class="bi bi-download" viewBox="0 0 16 16"
                                                    style="margin-right: 5px;">
                                                    <path
                                                        d="M.5 9.9a.5.5 0 0 1 .5.5V13a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2.6a.5.5 0 1 1 1 0V13a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.6a.5.5 0 0 1 .5-.5z" />
                                                    <path
                                                        d="M5.646 5.646a.5.5 0 0 1 .708 0L8 7.293V1.5a.5.5 0 0 1 1 0v5.793l1.646-1.647a.5.5 0 1 1 .708.708l-2.5 2.5a.5.5 0 0 1-.708 0l-2.5-2.5a.5.5 0 0 1 0-.708z" />
                                                </svg>

                                            </a>
                                            <!-- @else
                                            <a href="javascript:void(0);"
                                                style="cursor: pointer; color: darkgreen; text-decoration: none; font-size: inherit; text-align: center">
                                                {{__('dashboard.nothing')}}
                                            </a>
                                            @endif -->
                                        </b>
                                    </div>

                                </div>
                                <div class="card">
                                    <h5>بيانات صاحب المشروع</h5>
                                    <br>
                                    <div class="row">
                                        <div class="col-6"><i class="fa-light fa-user"></i> صاحب الحساب</div>
                                        <div class="col-6">شركة التطوير العقاري الاولي 1</div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-6"><i class="fa-light fa-file-invoice"></i> نوع الحساب</div>
                                        <div class="col-6">مطور العقاري </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-6"><i class="fa-duotone fa-light fa-calculator-simple"></i> عدد
                                            المشاريع</div>
                                        <div class="col-6">قيد المراجعه</div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-6"><i class="fa-regular fa-star"></i> التقييم</div>
                                        <div class="col-6">قيد المراجعه</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../assets/js/dashboard.js"></script>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <!-- <script>
        $(document).ready(function () {
            $(document).on('submit', '.store', function (e) {
                e.preventDefault();
                var url = $(this).attr('action');

                // تعطيل الزر وإضافة اللودر
                $("#submit_button").prop("disabled", true).html('<span class="spinner-border spinner-border-sm"></span> جاري الإرسال...');

                $.ajax({
                    url: url,
                    method: 'post',
                    data: new FormData($(this)[0]),
                    dataType: 'json',
                    processData: false,
                    contentType: false,
                    success: function (response) {
                        $(".text-danger").remove();
                        $('.store input, .store textarea, .store select').removeClass('border-danger');

                        Swal.fire({
                            position: 'top-start',
                            type: 'success',
                            title: '{{__('dashboard.added_successfully') }}',
                            showConfirmButton: false,
                            timer: 1500,
                            confirmButtonClass: 'btn btn-primary',
                            buttonsStyling: false,
                        })

                        setTimeout(function () {
                            window.location.replace(response.url);
                        }, 1000);
                    },
                    error: function (xhr) {
                        $(".text-danger").remove();
                        $('.store input, .store textarea, .store select').removeClass('border-danger');

                        $.each(xhr.responseJSON.errors, function (key, value) {
                            if (key.indexOf(".") >= 0) {
                                var split = key.split('.');
                                key = split[0] + '\\[' + split[1] + '\\]';
                            }

                            $('.store input[name^=' + key + '], .store textarea[name^=' + key + '], .store select[name^=' + key + ']')
                                .addClass('border-danger')
                                .after(`<span class="mt-5 text-danger">${value}</span>`);
                        });
                    },
                    complete: function () {
                        // إعادة الزر لحالته الطبيعية بعد الانتهاء
                        $("#submit_button").prop("disabled", false).html("ارسال العـــــرض");
                    }
                });
            });
        });

    </script> -->
    <script>
        document.getElementById('file_pricing').addEventListener('change', function () {
            let fileName = this.files.length ? this.files[0].name : "ارفاق التسعير كـ PDF";
            document.getElementById('file-label').textContent = fileName;
        });
    </script>
</body>

</html>